(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d21e53d"],{d4a8:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"full-width row justify-center"},[a("q-ajax-bar",{ref:"bar",attrs:{position:"bottom",color:"accent",size:"10px"}}),a("div",{staticClass:"shadow-13 bg-white q-pa-lg q-ma-lg-lg col-12 col-md-6"},[a("q-form",{staticClass:"q-gutter-sm",on:{submit:t.onSubmit}},[a("div",{staticClass:"row flex flex-center q-mb-md"},[a("q-avatar",{attrs:{size:"100px"}},[a("q-img",{ref:"avatarImg",staticClass:"fit",attrs:{src:t.avatarUrl,"spinner-color":"accent"},scopedSlots:t._u([{key:"error",fn:function(){return[a("div",{staticClass:"absolute-full text-white",staticStyle:{padding:"0"}},[a("q-icon",{staticStyle:{"font-size":"101px"},attrs:{name:"account_circle"}})],1),a("div",{staticClass:"absolute-full text-subtitle2 flex flex-center disabled"},[t._v("\n                "+t._s(t.$t("change"))+"\n              ")]),a("q-input",{staticClass:"fit cursor-pointer",attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg",color:"white",hidden:"",borderless:""},on:{input:t.changeAvatar}})]},proxy:!0}])},[a("div",{staticClass:"absolute-full text-subtitle2 flex flex-center disabled"},[t._v("\n              "+t._s(t.$t("change"))+"\n            ")]),a("q-input",{staticClass:"fit cursor-pointer",attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg",color:"white",hidden:"",borderless:""},on:{input:t.changeAvatar}})],1)],1)],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"col-sm-6 q-pr-sm-sm col-12",attrs:{outlined:"",type:"text",label:t.$t("name"),color:"dark-purple",rules:[function(e){return!!e||t.$t("requiredField")}],"lazy-rules":""},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}}),a("q-input",{staticClass:"col-sm-6 q-pl-sm-sm col-12",attrs:{outlined:"",type:"text",label:t.$t("lastName"),color:"dark-purple",rules:[function(e){return!!e||t.$t("requiredField")}],"lazy-rules":""},model:{value:t.user.lastName,callback:function(e){t.$set(t.user,"lastName",e)},expression:"user.lastName"}})],1),a("div",{staticClass:"row flex"},[a("q-btn",{staticClass:"offset-md-11 col-md-1 offset-9 col-3 q-pa-sm",attrs:{color:"dark-purple",label:t.$t("save"),loading:t.buttonLoading,type:"submit"}})],1)])],1)],1)},o=[],n=(a("7f7f"),{name:"PageIndex",data:function(){return{account:this.$store.getters["auth/getAccount"]||{},avatarUrl:"".concat("https://intouristing-api.herokuapp.com/","users/avatar/").concat(this.$store.getters["auth/getAccount"].id),buttonLoading:!1,user:{name:this.$store.getters["auth/getAccount"].name||"",lastName:this.$store.getters["auth/getAccount"].lastName||"",username:this.$store.getters["auth/getAccount"].username||"",email:this.$store.getters["auth/getAccount"].email||""}}},methods:{changeAvatar:function(t){var e=this,a=new FormData;a.append("avatar",t[0]),this.$axios.post("users/avatar/".concat(this.account.id),a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){e.avatarUrl="".concat("https://intouristing-api.herokuapp.com/","users/avatar/").concat(e.$store.getters["auth/getAccount"].id,"?").concat((new Date).getTime())}).catch(function(t){console.error(t),e.$q.notify({color:"negative",position:"top",message:"Unable to upload image",icon:"report_problem"})})},onSubmit:function(){var t=this;this.buttonLoading=!0,this.$axios.put("users",this.user).then(function(){t.$q.notify({color:"positive",position:"bottom",message:t.$t("saved"),icon:"check_circle"}),t.updateToken()}).catch(function(e){console.error(e),t.$q.notify({color:"negative",position:"top",message:"Whoops! Something went wrong",icon:"report_problem"})}).then(function(){t.buttonLoading=!1})},updateToken:function(){var t=this;this.$axios.get("users/token/update").then(function(e){t.$q.localStorage.set("accessToken",e.data),t.$store.commit("auth/login")})}}}),i=n,r=a("2877"),c=Object(r["a"])(i,s,o,!1,null,null,null);e["default"]=c.exports}}]);